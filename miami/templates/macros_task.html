<<pre>
{% macro task_form() -%} 
<div id="taskForm" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="taskFormLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="taskFormLabel">New Tasks</h3>
  </div>
  <div class="modal-body">
    还可以输入<span id="charsLeft"></span>字
    <input id="title" type="text" class="input-block-level" placeholder="title">
    <textarea id = "detail"class="input-block-level" rows="10" placeholder="detail"></textarea>
  </div>
  <div class="modal-footer">
    <button id="saveTask" class="btn btn-primary">Save</button>
  </div>
</div>
{%- endmacro %} 
{% macro task_form_js(status='NEW',success_func='location=location;') -%} 
    $('#title').limit('33','#charsLeft');
    $('#saveTask').click(function(){
        $('#saveTask').attr('disabled','true');
        $.ajax({
          type: 'POST',
          url: '/tasks',
          data: '{"title":"'+$('#title').val()+'","detail":"'+$('#detail').val()+'","status":"{{status}}"}',
          success: function(data){
            {{success_func}}
          },
          dataType: 'json',
          contentType: 'application/json'
        });
    });
{%- endmacro %} 
</pre>